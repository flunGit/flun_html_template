### 1.创建统一入口文件: (index.js)
>	在项目根目录创建 index.js，内容如下：
```js
		// index.js - 统一导出接口
		module.exports = {
		  compile: require('./compile').compileAllTemplates,
		  startDevServer: require('./dev-server').startServer
		};
```
---

### 2.修改: compile.js（仅添加导出）
>	在文件底部添加：
```js
		// ===== 导出接口 =====
		module.exports = {
		  compileAllTemplates,
		  compile
		};

		// 保留直接执行功能
		if (require.main === module) {
		  compileAllTemplates();
		}
```
---

### 3.修改: dev-server.js（仅添加导出）
>	在文件底部添加：
```js
		// ===== 导出接口 =====
		module.exports = {
		  startServer
		};

		// 保留原有的直接执行功能
		if (require.main === module) {
		  startServer().catch(error => {
		    console.error('服务器启动失败:', error);
		    process.exit(1);
		  });
		}
```
---

### 4.修改: package.json
>
```json
{
	  "name": "flun-html-template", // 改为全局唯一名称
	  "version": "1.0.0",
	  "main": "index.js", // 指向新入口文件
	  "scripts": {
	    "dev": "nodemon dev-server.js",
	    "build": "node compile.js"
	  },
	  "bin": {
	    "template-dev": "./dev-server.js", // CLI命令
	    "template-build": "./compile.js"   // CLI命令
	  },
	  "files": [
	    "templates",
	    "services",
	    "static",
	    "dev-server.js",
	    "compile.js",
	    "index.js",
		"copy-files.js" // 从安装包复制必备文件到根目录
	  ],
	  "keywords": ["html", "template", "server"],
	  "author": "flun <cn@flun.top>",
	  "license": "ISC",
	  "dependencies": {
	    "express": "^5.1.0",
	    "mysql2": "^3.14.3"
	  },
	  "devDependencies": {
	    "nodemon": "^3.1.10"
	  }
}
```
---

###	５.创建复制脚本
>
	在包根目录创建copy-files.js文件
>   ## 注意:复制脚本安装时一定是相对在项目根目录（包目录的父目录的父目录）
---

### 6.创建: .npmignore 文件
>
	# 忽略编译生成的文件
	index.html
	about.html

	# 忽略开发配置文件
	.env
	.env.*
	config.json

	# 忽略版本控制
	.git/
	.gitignore

	# 忽略日志
	*.log
	logs/

	# 忽略IDE文件
	.idea/
	.vscode/
---

### 7.创建: README.md（用户文档）
>
	# HTML模板工具包

	## 安装
	```bash
	npm install flun-html-template
	```

	## 使用方式

	### 原始使用方式
	```bash
	# 启动开发服务器
	npm run dev
	# 或
	node dev-server.js

	# 编译模板
	npm run build
	# 或
	node compile.js
	```

	### 作为全局命令行工具
	```bash
	# 启动开发服务器
	npx template-dev

	# 编译模板
	npx template-build
	```

	### 作为模块使用
	```javascript
	const { startDevServer, compile } = require('flun-html-template');

	// 启动开发服务器
	startDevServer();

	// 编译模板
	compile();
	```
---

### 8.发布流程:
>
	1.准备工作:
```bash
		# 注册npm账号（如果已有跳过）
		打开 https://www.npmjs.com/signup

		# 登录npm
			npm login
		# 输入：用户名、密码、邮箱验证码
```
	2.检查包名可用性:
		访问：https://www.npmjs.com/package/flun-html-template
		确保名称未被占用
>
	3.发布包:
```bash
		# 切换官方源（国内用户）
			npm config set registry https://registry.npmjs.org

		# 发布
			npm publish --access=public
```
	4.验证发布:
		访问：https://www.npmjs.com/package/flun-html-template
		查看包信息是否显示

>
	5.本地测试验证:（发布前必做）
		1. 验证项目完整性
```bash
		# 运行开发服务器 - 应正常工作
			npm run dev

		# 运行编译脚本 - 应正常工作
			npm run build
```
    	2.模拟安装测试
```bash
		# 在项目根目录
			npm link

		# 新建测试目录
			mkdir test-install && cd test-install

		# 链接包
			npm link flun-html-template

		# 测试命令行
			npx template-dev
			npx template-build

		# 测试模块调用
			node -e "const pkg = require('flun-html-template'); pkg.startDevServer()"
```
---


### 9.后续维护:
	1. 更新版本
```bash
		#打包扩展
			npm pack

		# 测试安装(带详细输出)
			npm i flun-html-template-1.0.12.tgz --foreground-scripts

		# 小版本更新（bug修复）
			npm version patch
			npm publish

		# 功能更新
			npm version minor
			npm publish

		# 重大变更
			npm version major
			npm publish
		# 或者2条命令同时执行(简写:以小版本更新为例)
			npm version patch && npm publish

		.\publish.ps1                       # 发布脚本

```
	2. 撤回发布（72小时内有效）
```bash
		npm unpublish flun-html-template@1.1.10  # 删除特定版本
		npm deprecate flun-html-template "此包已弃用，请勿再使用。" # 弃用包
		npm unpublish flun-html-template --force    # 删除整个包
```
---

### 模块声明
1. 在根目录创建index.d.ts文件,内容为 `declare module 'flun-env';`
2. package.json中添加:
```json
"types": "index.d.ts",
 "files": ["index.d.ts",],
```
---

### 9.常见问题解决:
>
| 问题现象      | &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; | 解决方案                                   |
| :------------ | ---------------------------------------- | :----------------------------------------- |
| 403 Forbidden |                                          | 1. 验证邮箱                                |
|               |                                          | 2. 检查包名唯一性                          |
|               |                                          | 3. npm whoami确认登录                      |
| 模块找不到    |                                          | 1. 检查main字段配置                        |
|               |                                          | 2. 确认files包含必要文件                   |
| 模板加载失败  |                                          | 1. 确认文件在包中                          |
|               |                                          | 2. 检查文件路径大小写                      |
| 版本冲突      |                                          | 1. 更新版本号                              |
|               |                                          | 2. 删除node_modules和package-lock.json重试 |
